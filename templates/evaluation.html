{% extends 'base.html' %} {% block title %}Evaluasi Mandiri - Lab Bahasa{%
endblock %} {% block content %}
<div class="container mt-4">
  <h1 class="text-center mb-4">Evaluasi Mandiri</h1>

  {% if not session.pretest_completed %}
  <div class="alert alert-warning mb-4">
    <h4 class="alert-heading">Pretest Diperlukan!</h4>
    <p>Sebelum mengakses evaluasi mandiri lainnya, Anda perlu menyelesaikan pretest terlebih dahulu untuk menentukan level kemampuan awal Anda.</p>
    <hr>
    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
      <a href="{{ url_for('pretest') }}" class="btn btn-success">Mulai Pretest Sekarang</a>
    </div>
  </div>
  {% endif %}

  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card mb-4">
        <div class="card-header bg-primary text-white">
          <h2 class="h4 mb-0">Tes Penempatan (Pretest)</h2>
        </div>
        <div class="card-body">
          <p>
            Tes ini dirancang untuk menentukan level kemampuan bahasa Anda
            secara umum. Hasil tes akan membantu merekomendasikan materi
            pembelajaran yang sesuai dengan level Anda.
          </p>
          {% if session.pretest_completed %}
            <div class="alert alert-success">
              <p><strong>Anda telah menyelesaikan pretest/post-test pada:</strong> {{ session.pretest_date }}</p>
              <p><strong>Level yang ditetapkan:</strong> {{ session.user_level }}</p>
            </div>

          {% endif %}
        </div>
      </div>

      <h3 class="text-center mb-3">Tes Kemampuan Bahasa</h3>

      <div class="card mb-4 {% if not session.pretest_completed %}text-muted{% endif %}">
        <div class="card-header {% if session.pretest_completed %}bg-success{% else %}bg-secondary{% endif %} text-white">
          <h2 class="h4 mb-0">Kemampuan Mendengarkan (Listening)</h2>
        </div>
        <div class="card-body">
          <p>
            Tes ini mengukur seberapa baik Anda memahami bahasa lisan melalui
            rekaman audio dengan berbagai tingkat kesulitan.
          </p>
          {% if session.pretest_completed %}
            <a href="{{ url_for('listening_test') }}" class="btn btn-success">Mulai Tes Listening</a>
          {% else %}
            <button class="btn btn-secondary" disabled>Selesaikan Pretest Dulu</button>
          {% endif %}
        </div>
      </div>

      <div class="card mb-4 {% if not session.pretest_completed %}text-muted{% endif %}">
        <div class="card-header {% if session.pretest_completed %}bg-info{% else %}bg-secondary{% endif %} text-white">
          <h2 class="h4 mb-0">Kemampuan Membaca (Reading)</h2>
        </div>
        <div class="card-body">
          <p>
            Tes ini mengukur kemampuan Anda dalam memahami teks tertulis dengan
            berbagai topik dan tingkat kesulitan.
          </p>
          {% if session.pretest_completed %}
            <a href="{{ url_for('reading_test') }}" class="btn btn-info">Mulai Tes Reading</a>
          {% else %}
            <button class="btn btn-secondary" disabled>Selesaikan Pretest Dulu</button>
          {% endif %}
        </div>
      </div>

      <div class="card mb-4 {% if not session.pretest_completed %}text-muted{% endif %}">
        <div class="card-header {% if session.pretest_completed %}bg-warning{% else %}bg-secondary{% endif %} text-white">
          <h2 class="h4 mb-0">Kemampuan Berbicara (Speaking)</h2>
        </div>
        <div class="card-body">
          <p>
            Tes ini mengevaluasi kemampuan Anda dalam mengucapkan kata dan
            kalimat dengan jelas, serta kemampuan mengekspresikan ide dalam
            bahasa target.
          </p>
          {% if session.pretest_completed %}
            <a href="{{ url_for('speaking_test') }}" class="btn btn-warning">Mulai Tes Speaking</a>
          {% else %}
            <button class="btn btn-secondary" disabled>Selesaikan Pretest Dulu</button>
          {% endif %}
        </div>
      </div>

      <div class="card {% if not session.pretest_completed %}text-muted{% endif %}">
        <div class="card-header {% if session.pretest_completed %}bg-secondary{% else %}bg-secondary{% endif %} text-white">
          <h2 class="h4 mb-0">Laporan Perkembangan</h2>
        </div>
        <div class="card-body">
          <p>
            Lihat laporan lengkap tentang hasil tes Anda dan dapatkan
            rekomendasi untuk meningkatkan kemampuan bahasa Anda.
          </p>
          {% if session.pretest_completed %}
            <a href="{{ url_for('progress_report') }}" class="btn btn-secondary">Lihat Laporan</a>
          {% else %}
            <button class="btn btn-secondary" disabled>Selesaikan Pretest Dulu</button>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
